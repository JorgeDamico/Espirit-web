<section class="row">
    <div class="col-lg-6 offset-sm-3 col-10 offset-1 mx-auto" id="formu">
        <p class="p_titulo text text-center pb-4">Registrar usuario</p>
        <form [formGroup]="myForm" (ngSubmit)="Registrar()">
            <div class="mb-3" >
                <label class="form-label" >Usuario</label>                    
                <input  type="text" class="form-control" formControlName="user">      
            </div>
            <div class="mb-3">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" formControlName="correo" aria-describedby="emailHelp">
            </div>
            <div class="mb-3">
                <label class="form-label">Password</label>
                <input type="password" class="form-control" formControlName="clave">
            </div>
            <div class="mb-3">
                <label class="form-label" >Rol</label>
                <select class="form-control" formControlName="role" id="" >
                    <option value="User" >User</option>
                    <option value="Admin" >Admin</option>
                </select>      
            </div>
            <button id="btn_Enviar" type="submit" class="btn btn-outline-success" [disabled]="myForm.invalid">
                <div *ngIf="!myForm.invalid">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-check-circle" viewBox="0 0 16 16">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"/>
                </svg>
                </div>
                Enviar
            </button>
    
            <div id="err" *ngIf="myForm.get('user')?.errors && myForm.get('user')?.dirty">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="red" class="bi bi-exclamation-circle" viewBox="0 0 16 16">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                </svg>
                <p *ngIf="myForm.get('user')?.hasError('required')">No deje el usuario vacío</p>
                <p *ngIf="myForm.get('user')?.hasError('minlength')">El usuario debe contener más de tres caracteres</p>
            </div>
            <div id="err" *ngIf="myForm.get('role')?.errors && myForm.get('role')?.dirty">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="red" class="bi bi-exclamation-circle" viewBox="0 0 16 16">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                </svg>
                <p *ngIf="myForm.get('role')?.hasError('required')">No deje el rol vacío</p>
            </div>
            <div id="err" *ngIf="myForm.get('correo')?.errors && myForm.get('correo')?.dirty">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="red" class="bi bi-exclamation-circle" viewBox="0 0 16 16">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                </svg>
                <p *ngIf="myForm.get('correo')?.hasError('required')">Complete el correo</p>
                <p *ngIf="myForm.get('correo')?.hasError('email')">No se olvide que los correos llevan @</p>
            </div>
            <div id="err" *ngIf="myForm.get('clave')?.errors && myForm.get('clave')?.dirty">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="red" class="bi bi-exclamation-circle" viewBox="0 0 16 16">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                </svg>
                <p *ngIf="myForm.get('clave')?.hasError('required')">Complete la clave</p>
                <p *ngIf="myForm.get('clave')?.hasError('pattern')">La clave debe contener al menos una mayúscula, un número y entre 6 y 10 caracteres</p>
            </div>
    
        </form>
    </div>

    <br/>

    <div class="col-lg-6 offset-sm-3 col-10 offset-1  mb-4 mt-4 pb-3" id="usuarios">
        <p class="text text-center mt-3 mb-2 p_titulo">Usuarios <span style="font-size: 11px;" class="badge bg-success">{{cantidadUsuarios}}</span></p>
        <button class="btn btn-outline-success m-4" type="button" 
        routerLink="/registro"  (click)="refreshUsuarios()" >Actualizar
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="orange" class="bi bi-recycle" viewBox="0 0 16 16">
                <path d="M9.302 1.256a1.5 1.5 0 0 0-2.604 0l-1.704 2.98a.5.5 0 0 0 .869.497l1.703-2.981a.5.5 0 0 1 .868 0l2.54 4.444-1.256-.337a.5.5 0 1 0-.26.966l2.415.647a.5.5 0 0 0 .613-.353l.647-2.415a.5.5 0 1 0-.966-.259l-.333 1.242-2.532-4.431zM2.973 7.773l-1.255.337a.5.5 0 1 1-.26-.966l2.416-.647a.5.5 0 0 1 .612.353l.647 2.415a.5.5 0 0 1-.966.259l-.333-1.242-2.545 4.454a.5.5 0 0 0 .434.748H5a.5.5 0 0 1 0 1H1.723A1.5 1.5 0 0 1 .421 12.24l2.552-4.467zm10.89 1.463a.5.5 0 1 0-.868.496l1.716 3.004a.5.5 0 0 1-.434.748h-5.57l.647-.646a.5.5 0 1 0-.708-.707l-1.5 1.5a.498.498 0 0 0 0 .707l1.5 1.5a.5.5 0 1 0 .708-.707l-.647-.647h5.57a1.5 1.5 0 0 0 1.302-2.244l-1.716-3.004z"/>
            </svg>
        </button>           
        <div class="col-12" id="scroller" ><hr>
            <ol class="list-group list-group-numbered" >
                <li class="list-group-item d-flex justify-content-between align-items-start" *ngFor="let user of arrayUsuarios">
                    <div id="cortarTb" class="ms-2 me-auto">
                        <p class="text">Usuario:  {{user.user}} </p>
                        <p class="text">Nivel: {{user.role}}  </p> 
                    </div>
                    <span class="badge bg-outline-secondary rounded-pill">
                        <input type="button" (click)="eliminarUsuario(user._id)"  class="text bg-outline-secondary" value="Eliminar" />
                    </span>
                </li>
            </ol>
        </div>
    </div>

</section>
